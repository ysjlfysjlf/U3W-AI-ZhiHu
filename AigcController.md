
# AIGC控制器接口文档

## 1. 接口概述
本接口文档描述了与各大AI平台（腾讯元宝、豆包等）交互的RESTful接口，包含多AI代理、腾讯元宝、豆包等功能模块的请求处理逻辑。
注意：在使用本接口文档的所有接口之前，确保已经使用BrowserController里面的接口进行登录了相关AI,否则将遇到失败。

## 2. 通用请求头
| 字段          | 类型   | 描述                 | 必填 |
|---------------|--------|----------------------|------|
| Content-Type  | string | application/json     | 是   |


## 3. 数据模型：UserInfoRequest
### 3.1 字段说明
| 字段名          | 类型     | 必填 | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|-----------------|----------|------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| userPrompt      | string   | 是   | 用户输入的提示词或对话内容                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| userId          | string   | 是   | 用户唯一标识，也是浏览器上下文的标识，可填任意不重复数字                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| corpId          | string   | 否   | 企业ID（企业用户关联标识）                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| taskId          | string   | 否   | 任务唯一编号                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| roles           | string   | 是   | AI配置权限（多个用逗号分隔），枚举值如下：<br>**腾讯元宝T1系列**：<br>`yb-hunyuan-pt`（基础版）<br>`yb-hunyuan-sdsk`（深度思考）<br>`yb-hunyuan-lwss`（联网搜索）<br>**腾讯元宝DS系列**：<br>`yb-deepseek-pt`（基础版）<br>`yb-deepseek-sdsk`（深度思考）<br>`yb-deepseek-lwss`（联网搜索）<br>**元器代理系列**：<br>`cube-trubos-agent`（TurboS@元器）<br>`cube-turbos-large-agent`（TurboS长文版）<br>`cube-mini-max-agent`（MiniMax@元器）<br>`cube-sogou-agent`（搜狗搜索）<br>`cube-lwss-agent`（官方搜索）<br>**豆包系列**：<br>`zj-db`（基础版）<br>`zj-db-sdsk`（深度思考） |
| toneChatId      | string   | 否   | 腾讯元宝T1上下文对话ID                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ybDsChatId      | string   | 否   | 腾讯元宝DS上下文对话ID                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| dbChatId        | string   | 否   | 豆包上下文对话ID                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| isNewChat       | string   | 否   | 是否新对话（`true`清空上下文，默认`false`）                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| draftContent    | string   | 否   | 返回的消息内容（输出字段）                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| aiName          | string   | 否   | 返回的模型名称（输出字段）                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| status          | string   | 否   | 登录状态（输出字段）                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| type            | string   | 否   | 消息类型（输出字段）                                                                                                                                                                                                                                                                                                                                                                                                                                                      |


## 4. 接口详情

### 4.1 多AI代理请求接口
- **接口路径**：`/api/browser/startAgent`
- **请求方法**：POST
- **功能描述**：根据`roles`参数调用多个AI代理（如TurboS、MiniMax等），返回拼接的生成内容。

#### 4.1.1 入参
| 字段名          | 类型     | 说明                 |
|-----------------|----------|----------------------|
| userInfoRequest | UserInfo | 包含用户ID、角色、提示词等信息 |

#### 4.1.2 出参
| 类型   | 描述                                                                 |
|--------|----------------------------------------------------------------------|
| string | 成功：各代理生成内容的拼接结果<br>失败：`"获取内容失败"`             |

#### 4.1.3 请求示例
```json
{
  "userId": "22",
  "roles": "cube-trubos-agent,cube-mini-max-agent",
  "userPrompt": "生成一篇关于AI的文章",
  "isNewChat": "true"
}
```

#### 4.1.4 响应示例
```json
"TurboS@元器生成内容：...\nMiniMax@元器生成内容：..."
```


### 4.2 腾讯元宝请求接口
- **接口路径**：`/api/browser/startYB`
- **请求方法**：POST
- **功能描述**：处理腾讯元宝平台（T1/DS系列）的对话请求，支持基础版、深度思考、联网搜索模式。

#### 4.2.1 入参
| 字段名          | 类型     | 说明                                                                 |
|-----------------|----------|----------------------------------------------------------------------|
| userInfoRequest | UserInfo | `roles`需包含腾讯元宝相关角色（如`yb-hunyuan-pt`）<br>`toneChatId`/`ybDsChatId`为对应会话ID |

#### 4.2.2 出参
| 类型   | 描述                 |
|--------|----------------------|
| string | 成功：空字符串（暂未实现内容返回）<br>失败：`"获取内容失败"` |

#### 4.2.3 请求示例
```json
{
  "userId": "22",
  "roles": "yb-hunyuan-sdsk",
  "userPrompt": "分析当前经济形势",
  "isNewChat": "true"
}
```


### 4.3 豆包常规请求接口
- **接口路径**：`/api/browser/startDB`
- **请求方法**：POST
- **功能描述**：处理豆包基础版/深度思考模式的对话请求，返回生成的文本内容。

#### 4.3.1 入参
| 字段名          | 类型     | 说明                                                                 |
|-----------------|----------|----------------------------------------------------------------------|
| userInfoRequest | UserInfo | `roles`需包含豆包相关角色（如`zj-db-sdsk`）<br>`dbChatId`为豆包会话ID |

#### 4.3.2 出参
| 类型   | 描述                                                                 |
|--------|----------------------------------------------------------------------|
| string | 成功：豆包生成的文本内容<br>失败：`"获取内容失败"`                   |

#### 4.3.3 请求示例
```json
{
  "userId": "22",
  "roles": "zj-db-sdsk",
  "userPrompt": "写一首现代诗",
  "isNewChat": "true"
}
```

#### 4.3.4 响应示例
```json
"《AI的低语》\n在数据的星河里，代码编织着梦的形状..."
```


## 5. 错误处理
| 状态码 | 响应内容          | 描述                     |
|--------|-------------------|--------------------------|
| 200    | 正常返回内容      | 接口调用成功             |
| 500    | "获取内容失败"    | 服务器内部错误           |
| 400    | 校验失败提示      | 入参格式或必填项缺失     |


## 6. 版本信息
- **接口版本**：V1.2
- **文档日期**：2025年05月28日
- **作者**：悟空共创（杭州）智能科技有限公司
