{"remainingRequest":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\U3W-AIProject\\U3W-AI\\cube-ui\\src\\views\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\src\\views\\index.vue","mtime":1753151622738},{"path":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752387764959},{"path":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1752387764613},{"path":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752387764959},{"path":"D:\\U3W-AIProject\\U3W-AI\\cube-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1752387756652}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUGFuZWxHcm91cCBmcm9tICIuL2Rhc2hib2FyZC9QYW5lbEdyb3VwIjsNCmltcG9ydCBMaW5lQ2hhcnQgZnJvbSAiLi9kYXNoYm9hcmQvTGluZUNoYXJ0IjsNCmltcG9ydCBSYWRkYXJDaGFydCBmcm9tICIuL2Rhc2hib2FyZC9SYWRkYXJDaGFydCI7DQppbXBvcnQgUGllQ2hhcnQgZnJvbSAiLi9kYXNoYm9hcmQvUGllQ2hhcnQiOw0KaW1wb3J0IEJhckNoYXJ0IGZyb20gIi4vZGFzaGJvYXJkL0JhckNoYXJ0IjsNCmltcG9ydCB1c2VyQXZhdGFyIGZyb20gIkAvdmlld3Mvc3lzdGVtL3VzZXIvcHJvZmlsZS91c2VyQXZhdGFyIjsNCmltcG9ydCB1c2VySW5mbyBmcm9tICJAL3ZpZXdzL3N5c3RlbS91c2VyL3Byb2ZpbGUvdXNlckluZm8iOw0KaW1wb3J0IHJlc2V0UHdkIGZyb20gIkAvdmlld3Mvc3lzdGVtL3VzZXIvcHJvZmlsZS9yZXNldFB3ZCI7DQppbXBvcnQgew0KICBnZXRVc2VyUHJvZmlsZSwNCiAgYmluZFdjT2ZmaWNlQWNjb3VudCwNCiAgZ2V0T2ZmaWNlQWNjb3VudCwNCn0gZnJvbSAiQC9hcGkvc3lzdGVtL3VzZXIiOw0KaW1wb3J0IHsgZ2V0VXNlclBvaW50c1JlY29yZCB9IGZyb20gIkAvYXBpL3dlY2hhdC9jb21wYW55IjsNCmltcG9ydCB3ZWJzb2NrZXRDbGllbnQgZnJvbSAiQC91dGlscy93ZWJzb2NrZXQiOw0KDQpjb25zdCBsaW5lQ2hhcnREYXRhID0gew0KICBuZXdWaXNpdGlzOiB7DQogICAgZXhwZWN0ZWREYXRhOiBbMTAwLCAxMjAsIDE2MSwgMTM0LCAxMDUsIDE2MCwgMTY1XSwNCiAgICBhY3R1YWxEYXRhOiBbMTIwLCA4MiwgOTEsIDE1NCwgMTYyLCAxNDAsIDE0NV0sDQogIH0sDQogIG1lc3NhZ2VzOiB7DQogICAgZXhwZWN0ZWREYXRhOiBbMjAwLCAxOTIsIDEyMCwgMTQ0LCAxNjAsIDEzMCwgMTQwXSwNCiAgICBhY3R1YWxEYXRhOiBbMTgwLCAxNjAsIDE1MSwgMTA2LCAxNDUsIDE1MCwgMTMwXSwNCiAgfSwNCiAgcHVyY2hhc2VzOiB7DQogICAgZXhwZWN0ZWREYXRhOiBbODAsIDEwMCwgMTIxLCAxMDQsIDEwNSwgOTAsIDEwMF0sDQogICAgYWN0dWFsRGF0YTogWzEyMCwgOTAsIDEwMCwgMTM4LCAxNDIsIDEzMCwgMTMwXSwNCiAgfSwNCiAgc2hvcHBpbmdzOiB7DQogICAgZXhwZWN0ZWREYXRhOiBbMTMwLCAxNDAsIDE0MSwgMTQyLCAxNDUsIDE1MCwgMTYwXSwNCiAgICBhY3R1YWxEYXRhOiBbMTIwLCA4MiwgOTEsIDE1NCwgMTYyLCAxNDAsIDEzMF0sDQogIH0sDQp9Ow0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJJbmRleCIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBQYW5lbEdyb3VwLA0KICAgIExpbmVDaGFydCwNCiAgICBSYWRkYXJDaGFydCwNCiAgICBQaWVDaGFydCwNCiAgICBCYXJDaGFydCwNCiAgICB1c2VyQXZhdGFyLA0KICAgIHVzZXJJbmZvLA0KICAgIHJlc2V0UHdkLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsaW5lQ2hhcnREYXRhOiBsaW5lQ2hhcnREYXRhLm5ld1Zpc2l0aXMsDQogICAgICB1c2VyOiB7fSwNCiAgICAgIHJvbGVHcm91cDoge30sDQogICAgICBwb3N0R3JvdXA6IHt9LA0KICAgICAgYWN0aXZlVGFiOiAidXNlcmluZm8iLA0KICAgICAgLy8tLS0tLS0g57uR5a6a5YWs5LyX5Y+355u45YWz5Y+Y6YePIC0tLS0tLS8vDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsIC8vIOe7keWumuWFrOS8l+WPt+W8ueeqlw0KICAgICAgZGlhbG9nQWdlbnRGb3JtVmlzaWJsZTogZmFsc2UsIC8vIOe7keWumuaZuuiDveS9k+W8ueeqlw0KICAgICAgZGlhbG9nU3BhY2VGb3JtVmlzaWJsZTogZmFsc2UsIC8vIOe7keWumuWFg+WZqOepuumXtOW8ueeqlw0KICAgICAgZm9ybTogew0KICAgICAgICBhcHBJZDogIiIsIC8vIOWFrOS8l+WPt2FwcElkDQogICAgICAgIGFwcFNlY3JldDogIiIsIC8vIOWFrOS8l+WPt2FwcFNlY3JldA0KICAgICAgICBvZmZpY2VBY2NvdW50TmFtZTogIiIsIC8vIOWFrOS8l+WPt+WQjeensA0KICAgICAgICBwaWNVcmw6ICIiLCAvLyDlhazkvJflj7flsIHpnaLlm74NCiAgICAgIH0sDQogICAgICAvLyDliKDpmaRBZ2VudOWSjFNwYWNl55u45YWz6KGo5Y2VDQogICAgICBmb3JtTGFiZWxXaWR0aDogIjEyMHB4IiwgLy/ovpPlhaXmoYblrr3luqYNCiAgICAgIC8vIOe7keWumuWFrOS8l+WPt+ihqOWNlemqjOivgeinhOWImQ0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgYXBwSWQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWlYXBwSWQiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIGFwcFNlY3JldDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaVhcHBTZWNyZXQiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgb2ZmaWNlQWNjb3VudE5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiBmYWxzZSwgbWVzc2FnZTogIuivt+i+k+WFpeWFrOS8l+WPt+WQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIC8vIOWIoOmZpEFnZW505ZKMU3BhY2Xnm7jlhbPpqozor4Hop4TliJkNCg0KICAgICAgLy8tLS0tLS0g56ev5YiG55u45YWz5Y+Y6YePIC0tLS0tLS8vDQogICAgICBsb2FkaW5nOiB0cnVlLCAvLyDpga7nvanlsYINCiAgICAgIGNoYW5nZVR5cGU6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAi5YWo6YOoIiwNCiAgICAgICAgICB2YWx1ZTogIjAiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICLlop7liqAiLA0KICAgICAgICAgIHZhbHVlOiAiMSIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogIua2iOiAlyIsDQogICAgICAgICAgdmFsdWU6ICIyIiwNCiAgICAgICAgfSwNCiAgICAgIF0sIC8vIOenr+WIhuaYjue7huihqOS4reeahOenr+WIhuexu+Weiw0KICAgICAgb3BlblBvaW50c1JlY29yZDogZmFsc2UsIC8vIOenr+WIhuaYjue7huW8ueeqlw0KICAgICAgcG9pbnR0b3RhbDogMCwgLy8g56ev5YiG5piO57uG5oC75pWwDQogICAgICBxdWVyeVBvaW50Rm9ybTogew0KICAgICAgICBsaW1pdDogMTAsDQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHR5cGU6ICIiLA0KICAgICAgICB1c2VySWQ6ICIiLA0KICAgICAgfSwgLy8g56ev5YiG5piO57uG5p+l6K+i6ZyA6KaB55qE5p+l6K+i5Y+C5pWwDQogICAgICBwb2ludHNSZWNvcmRMaXN0OiBudWxsLCAvLyDnp6/liIbmmI7nu4bliJfooagNCg0KICAgICAgLy8tLS0tLS0g562+5Yiw55u45YWz5Y+Y6YePIC0tLS0tLS8vDQogICAgICB3ZWVrRGF5czogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXSwNCiAgICAgIGN1cnJlbnRZZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksDQogICAgICBjdXJyZW50TW9udGg6IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEsDQogICAgICBjb250aW51b3VzU2lnbkluRGF5czogNywNCiAgICAgIG1vbnRobHlTaWduSW5EYXlzOiAxNSwNCiAgICAgIHRvdGFsU2lnbkluRGF5czogMTI4LA0KICAgICAgdG9kYXlTaWduZWRJbjogZmFsc2UsDQogICAgICBzaWduSW5IaXN0b3J5OiBbDQogICAgICAgIHsgZGF0ZTogIjIwMjQtMDEtMTUiLCB0aW1lOiAiMDg6MzA6MjUiIH0sDQogICAgICAgIHsgZGF0ZTogIjIwMjQtMDEtMTQiLCB0aW1lOiAiMDk6MTU6MzMiIH0sDQogICAgICAgIHsgZGF0ZTogIjIwMjQtMDEtMTMiLCB0aW1lOiAiMDc6NDU6MTIiIH0sDQogICAgICAgIHsgZGF0ZTogIjIwMjQtMDEtMTIiLCB0aW1lOiAiMDg6MjA6NDUiIH0sDQogICAgICAgIHsgZGF0ZTogIjIwMjQtMDEtMTEiLCB0aW1lOiAiMDk6MDA6MTgiIH0sDQogICAgICBdLA0KICAgICAgc2lnbmVkRGF0ZXM6IFsNCiAgICAgICAgbmV3IERhdGUoMjAyNCwgMCwgMSksDQogICAgICAgIG5ldyBEYXRlKDIwMjQsIDAsIDIpLA0KICAgICAgICBuZXcgRGF0ZSgyMDI0LCAwLCAzKSwNCiAgICAgICAgbmV3IERhdGUoMjAyNCwgMCwgNCksDQogICAgICAgIG5ldyBEYXRlKDIwMjQsIDAsIDUpLA0KICAgICAgXSwNCiAgICAgIGFpTG9naW5TdGF0dXM6IHsNCiAgICAgICAgZG91YmFvOiBmYWxzZSwNCiAgICAgICAgZGVlcHNlZWs6IGZhbHNlLA0KICAgICAgICB6aGlodTogZmFsc2UsDQogICAgICAgICBtaW5pbWF4OiBmYWxzZQ0KICAgICAgfSwNCiAgICAgIGFjY291bnRzOiB7DQogICAgICAgIGRvdWJhbzogJycsDQogICAgICAgIGRlZXBzZWVrOiAnJywNCiAgICAgICAgemhpaHU6ICcnLA0KICAgICAgICBtaW5pbWF4OiAnJw0KICAgICAgfSwNCiAgICAgIGlzQ2xpY2s6IHsNCiAgICAgICAgZG91YmFvOiBmYWxzZSwNCiAgICAgICAgZGVlcHNlZWs6IGZhbHNlLA0KICAgICAgICB6aGlodTogZmFsc2UsDQogICAgICAgIG1pbmltYXg6IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIGFpTG9naW5EaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGN1cnJlbnRBaVR5cGU6ICIiLA0KICAgICAgcXJDb2RlVXJsOiAiIiwNCiAgICAgIC8vIOa2iOaBr+ebuOWFs+WPmOmHjw0KICAgICAgbWVzc2FnZXM6IFtdLA0KICAgICAgbWVzc2FnZUlucHV0OiAiIiwNCiAgICAgIGlzTG9hZGluZzogew0KICAgICAgICBkb3ViYW86IHRydWUsDQogICAgICAgIGRlZXBzZWVrOiB0cnVlLA0KICAgICAgICB6aGlodTogdHJ1ZSwNCiAgICAgICAgbWluaW1heDogdHJ1ZSwNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIC8vIOiuoeeul+W9k+WJjeaciOS7veeahOetvuWIsOaXpeacnw0KICBjb21wdXRlZDogew0KICAgIGNhbGVuZGFyRGF0ZXMoKSB7DQogICAgICBjb25zdCBkYXRlcyA9IFtdOw0KICAgICAgY29uc3QgZmlyc3REYXkgPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRZZWFyLCB0aGlzLmN1cnJlbnRNb250aCAtIDEsIDEpOw0KICAgICAgY29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudFllYXIsIHRoaXMuY3VycmVudE1vbnRoLCAwKTsNCg0KICAgICAgLy8gRmlsbCBpbiBlbXB0eSBzbG90cyBiZWZvcmUgZmlyc3QgZGF5DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpcnN0RGF5LmdldERheSgpOyBpKyspIHsNCiAgICAgICAgZGF0ZXMucHVzaChudWxsKTsNCiAgICAgIH0NCg0KICAgICAgLy8gRmlsbCBpbiBkYXlzIG9mIHRoZSBtb250aA0KICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbGFzdERheS5nZXREYXRlKCk7IGkrKykgew0KICAgICAgICBkYXRlcy5wdXNoKG5ldyBEYXRlKHRoaXMuY3VycmVudFllYXIsIHRoaXMuY3VycmVudE1vbnRoIC0gMSwgaSkpOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZGF0ZXM7DQogICAgfSwNCiAgICBnZXRBaUxvZ2luVGl0bGUoKSB7DQogICAgICBjb25zdCB0aXRsZXMgPSB7DQogICAgICAgIGRvdWJhbzogJ+ixhuWMheeZu+W9lScsDQogICAgICAgIGRlZXBzZWVrOiAnRGVlcFNlZWvnmbvlvZUnLA0KICAgICAgICB6aGlodTogJ+efpeS5juebtOetlOeZu+W9lScsDQogICAgICAgIG1pbmltYXg6ICJNaW5pTWF455m75b2VIiwNCiAgICAgIH07DQogICAgICByZXR1cm4gdGl0bGVzW3RoaXMuY3VycmVudEFpVHlwZV0gfHwgIueZu+W9lSI7DQogICAgfSwNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0VXNlcigpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlU2V0TGluZUNoYXJ0RGF0YSh0eXBlKSB7DQogICAgICB0aGlzLmxpbmVDaGFydERhdGEgPSBsaW5lQ2hhcnREYXRhW3R5cGVdOw0KICAgIH0sDQogICAgZ2V0VXNlcigpIHsNCiAgICAgIGdldFVzZXJQcm9maWxlKCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy5yb2xlR3JvdXAgPSByZXNwb25zZS5yb2xlR3JvdXA7DQogICAgICAgIHRoaXMucG9zdEdyb3VwID0gcmVzcG9uc2UucG9zdEdyb3VwOw0KICAgICAgICB0aGlzLnVzZXJJZCA9IHJlc3BvbnNlLmRhdGEudXNlcklkOw0KICAgICAgICB0aGlzLmNvcnBJZCA9IHJlc3BvbnNlLmRhdGEuY29ycElkOw0KDQogICAgICAgIHRoaXMuaW5pdFdlYlNvY2tldCh0aGlzLnVzZXJJZCk7IC8vIOWIm+W7uuaXtuW7uueri+i/nuaOpQ0KDQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIC8vIOajgOafpeixhuWMheeZu+W9leeKtuaAgQ0KICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogIlBMQVlfQ0hFQ0tfREJfTE9HSU4iLA0KICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwNCiAgICAgICAgICAgIGNvcnBJZDogdGhpcy5jb3JwSWQsDQogICAgICAgICAgfSk7DQogICAgICAgICAgLy8g5qOA5p+lTWluaU1heOeZu+W9leeKtuaAgQ0KICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogIlBMQVlfQ0hFQ0tfTUFYX0xPR0lOIiwNCiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgICBjb3JwSWQ6IHRoaXMuY29ycElkLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIC8vIOajgOafpURlZXBTZWVr55m75b2V54q25oCBDQogICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAiUExBWV9DSEVDS19ERUVQU0VFS19MT0dJTiIsDQogICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgICAgY29ycElkOiB0aGlzLmNvcnBJZCwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdQTEFZX0NIRUNLX1pISUhVX0xPR0lOJywNCiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgICBjb3JwSWQ6IHRoaXMuY29ycElkDQogICAgICAgICAgfSkNCiAgICAgICAgICAvLyDmo4Dmn6XpgJrkuYnljYPpl67nmbvlvZXnirbmgIENCiAgICAgICAgICAvLyB0aGlzLnNlbmRNZXNzYWdlKHsNCiAgICAgICAgICAvLyAgIHR5cGU6ICdQTEFZX0NIRUNLX1FXX0xPR0lOJywNCiAgICAgICAgICAvLyAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgLy8gICBjb3JwSWQ6IHRoaXMuY29ycElkDQogICAgICAgICAgLy8gfSk7DQogICAgICAgIH0sIDEwMDApOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDojrflj5blhazkvJflj7fkv6Hmga8NCiAgICBoYW5kbGVCaW5kV2VjaGF0KCkgew0KICAgICAgZ2V0T2ZmaWNlQWNjb3VudCgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9IG51bGwpIHsNCiAgICAgICAgICB0aGlzLmZvcm0uYXBwSWQgPSByZXNwb25zZS5kYXRhLmFwcElkOw0KICAgICAgICAgIHRoaXMuZm9ybS5hcHBTZWNyZXQgPSByZXNwb25zZS5kYXRhLmFwcFNlY3JldDsNCiAgICAgICAgICB0aGlzLmZvcm0ub2ZmaWNlQWNjb3VudE5hbWUgPSByZXNwb25zZS5kYXRhLm9mZmljZUFjY291bnROYW1lOw0KICAgICAgICAgIHRoaXMuZm9ybS5waWNVcmwgPSByZXNwb25zZS5kYXRhLnBpY1VybDsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g57uR5a6a5YWs5LyX5Y+3DQogICAgY29uZmlybUJpbmQoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8vIOihqOWNlemqjOivgemAmui/h++8jOe7p+e7reaPkOS6pA0KICAgICAgICAgIGJpbmRXY09mZmljZUFjY291bnQodGhpcy5mb3JtKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOihqOWNlemqjOivgeWksei0pQ0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDojrflj5blvZPliY3nmbvlvZXnlKjmiLfnp6/liIbmmI7nu4YNCiAgICBzaG93UG9pbnRzRGV0YWlsKCkgew0KICAgICAgdGhpcy5xdWVyeVBvaW50Rm9ybS51c2VySWQgPSB0aGlzLnVzZXIudXNlcklkOw0KICAgICAgdGhpcy5nZXRVc2VyUG9pbnRzUmVjb3JkKCk7DQogICAgfSwNCiAgICAvLyDojrflj5bnp6/liIbmmI7nu4YNCiAgICBnZXRVc2VyUG9pbnRzUmVjb3JkKCkgew0KICAgICAgZ2V0VXNlclBvaW50c1JlY29yZCh0aGlzLnF1ZXJ5UG9pbnRGb3JtKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLm9wZW5Qb2ludHNSZWNvcmQgPSB0cnVlOw0KICAgICAgICB0aGlzLnBvaW50c1JlY29yZExpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7DQogICAgICAgIHRoaXMucG9pbnR0b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDojrflj5blvZPliY3mnIjku73nmoTnrb7liLDml6XmnJ8NCiAgICBpc1NpZ25lZERhdGUoZGF0ZSkgew0KICAgICAgaWYgKCFkYXRlKSByZXR1cm4gZmFsc2U7DQogICAgICByZXR1cm4gdGhpcy5zaWduZWREYXRlcy5zb21lKA0KICAgICAgICAoc2lnbmVkRGF0ZSkgPT4NCiAgICAgICAgICBzaWduZWREYXRlLmdldERhdGUoKSA9PT0gZGF0ZS5nZXREYXRlKCkgJiYNCiAgICAgICAgICBzaWduZWREYXRlLmdldE1vbnRoKCkgPT09IGRhdGUuZ2V0TW9udGgoKSAmJg0KICAgICAgICAgIHNpZ25lZERhdGUuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICApOw0KICAgIH0sDQogICAgaXNUb2RheShkYXRlKSB7DQogICAgICBpZiAoIWRhdGUpIHJldHVybiBmYWxzZTsNCiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgIHJldHVybiAoDQogICAgICAgIGRhdGUuZ2V0RGF0ZSgpID09PSB0b2RheS5nZXREYXRlKCkgJiYNCiAgICAgICAgZGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpICYmDQogICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gdG9kYXkuZ2V0RnVsbFllYXIoKQ0KICAgICAgKTsNCiAgICB9LA0KICAgIGlzRnV0dXJlRGF0ZShkYXRlKSB7DQogICAgICBpZiAoIWRhdGUpIHJldHVybiBmYWxzZTsNCiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KICAgICAgcmV0dXJuIGRhdGUgPiB0b2RheTsNCiAgICB9LA0KICAgIGhhbmRsZVNpZ25JbigpIHsNCiAgICAgIGlmICghdGhpcy50b2RheVNpZ25lZEluKSB7DQogICAgICAgIHRoaXMudG9kYXlTaWduZWRJbiA9IHRydWU7DQogICAgICAgIHRoaXMuc2lnbmVkRGF0ZXMucHVzaChuZXcgRGF0ZSgpKTsNCiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgdGhpcy5zaWduSW5IaXN0b3J5LnVuc2hpZnQoew0KICAgICAgICAgIGRhdGU6IGAke25vdy5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KA0KICAgICAgICAgICAgMiwNCiAgICAgICAgICAgICIwIg0KICAgICAgICAgICl9LSR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICIwIil9YCwNCiAgICAgICAgICB0aW1lOiBgJHtTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICIwIil9OiR7U3RyaW5nKA0KICAgICAgICAgICAgbm93LmdldE1pbnV0ZXMoKQ0KICAgICAgICAgICkucGFkU3RhcnQoMiwgIjAiKX06JHtTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgIjAiKX1gLA0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5tb250aGx5U2lnbkluRGF5cysrOw0KICAgICAgICB0aGlzLnRvdGFsU2lnbkluRGF5cysrOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlQWlMb2dpbih0eXBlKSB7DQogICAgICB0aGlzLmN1cnJlbnRBaVR5cGUgPSB0eXBlOw0KICAgICAgdGhpcy5haUxvZ2luRGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmlzTG9hZGluZ1t0eXBlXSA9IHRydWU7DQogICAgICB0aGlzLmdldFFyQ29kZSh0eXBlKTsNCiAgICB9LA0KICAgIGdldFFyQ29kZSh0eXBlKSB7DQogICAgICB0aGlzLnFyQ29kZVVybCA9ICcnDQogICAgICBpZih0eXBlID09ICd6aGlodScpew0KICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnUExBWV9HRVRfWkhJSFVfUVJDT0RFJywNCiAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgIGNvcnBJZDogdGhpcy5jb3JwSWQNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGlmKHR5cGUgPT0gJ2RvdWJhbycpew0KICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAiUExBWV9HRVRfREJfUVJDT0RFIiwNCiAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgIGNvcnBJZDogdGhpcy5jb3JwSWQsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYodHlwZSA9PSAnZGVlcHNlZWsnKXsNCiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ1BMQVlfR0VUX0RFRVBTRUVLX1FSQ09ERScsDQogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwNCiAgICAgICAgICBjb3JwSWQ6IHRoaXMuY29ycElkDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKHR5cGUgPT0gIm1pbmltYXgiKSB7DQogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJQTEFZX0dFVF9NQVhfUVJDT0RFIiwNCiAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgIGNvcnBJZDogdGhpcy5jb3JwSWQsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgIG1lc3NhZ2U6ICLmraPlnKjojrflj5bnmbvlvZXkuoznu7TnoIEuLi4iLA0KICAgICAgICB0eXBlOiAiaW5mbyIsDQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldFBsYXRmb3JtSWNvbih0eXBlKSB7DQogICAgICBjb25zdCBpY29ucyA9IHsNCiAgICAgICAgZG91YmFvOiByZXF1aXJlKCdAL2Fzc2V0cy9sb2dvL2RvdWJhby5wbmcnKSwNCiAgICAgICAgZGVlcHNlZWs6IHJlcXVpcmUoJ0AvYXNzZXRzL2xvZ28vRGVlcHNlZWsucG5nJyksDQogICAgICAgIHpoaWh1OiByZXF1aXJlKCdAL2Fzc2V0cy9sb2dvL3poaWh1LnBuZycpLA0KICAgICAgICBtaW5pbWF4OiByZXF1aXJlKCJAL2Fzc2V0cy9sb2dvL01pbmlNYXgucG5nIiksDQogICAgICB9Ow0KICAgICAgcmV0dXJuIGljb25zW3R5cGVdIHx8ICIiOw0KICAgIH0sDQogICAgZ2V0UGxhdGZvcm1OYW1lKHR5cGUpIHsNCiAgICAgIGNvbnN0IG5hbWVzID0gew0KICAgICAgICBkb3ViYW86ICfosYbljIUnLA0KICAgICAgICBkZWVwc2VlazogJ0RlZXBTZWVrJywNCiAgICAgICAgemhpaHU6ICfnn6XkuY7nm7TnrZQnLA0KICAgICAgICBtaW5pbWF4OiAiTWluaU1heCIsDQoNCiAgICAgIH07DQogICAgICByZXR1cm4gbmFtZXNbdHlwZV0gfHwgIiI7DQogICAgfSwNCiAgICAvLyBXZWJTb2NrZXQg55u45YWz5pa55rOVDQogICAgaW5pdFdlYlNvY2tldChpZCkgew0KICAgICAgY29uc3Qgd3NVcmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX1dTX0FQSSArIGBteXBjLSR7aWR9YDsNCiAgICAgIGNvbnNvbGUubG9nKCJXZWJTb2NrZXQgVVJMOiIsIHByb2Nlc3MuZW52LlZVRV9BUFBfV1NfQVBJKTsNCiAgICAgIHdlYnNvY2tldENsaWVudC5jb25uZWN0KHdzVXJsLCAoZXZlbnQpID0+IHsNCiAgICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7DQogICAgICAgICAgY2FzZSAib3BlbiI6DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuato+WcqOiOt+WPluacgOaWsOeZu+W9leeKtuaAge+8jOivt+eojeWQji4uLiIpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAibWVzc2FnZSI6DQogICAgICAgICAgICB0aGlzLmhhbmRsZVdlYlNvY2tldE1lc3NhZ2UoZXZlbnQuZGF0YSk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICJjbG9zZSI6DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIldlYlNvY2tldOi/nuaOpeW3suWFs+mXrSIpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAiZXJyb3IiOg0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiV2ViU29ja2V06L+e5o6l6ZSZ6K+vIik7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICJyZWNvbm5lY3RfZmFpbGVkIjoNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIldlYlNvY2tldOmHjei/nuWksei0pe+8jOivt+WIt+aWsOmhtemdoumHjeivlSIpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBoYW5kbGVXZWJTb2NrZXRNZXNzYWdlKGRhdGEpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLmlLbliLDmtojmga86IiwgZGF0YSk7DQogICAgICBjb25zdCBkYXRhc3RyID0gZGF0YTsNCiAgICAgIGNvbnN0IGRhdGFPYmogPSBKU09OLnBhcnNlKGRhdGFzdHIpOw0KDQogICAgIGlmIChkYXRhc3RyLmluY2x1ZGVzKCJSRVRVUk5fUENfREJfUVJVUkwiKXx8DQogICAgIGRhdGFzdHIuaW5jbHVkZXMoIlJFVFVSTl9QQ19ERUVQU0VFS19RUlVSTCIpfHwNCiAgICAgZGF0YXN0ci5pbmNsdWRlcygiUkVUVVJOX1BDX1pISUhVX1FSVVJMIil8fA0KICAgIGRhdGFzdHIuaW5jbHVkZXMoIlJFVFVSTl9QQ19NQVhfUVJVUkwiKSkgew0KICAgICAgICB0aGlzLnFyQ29kZVVybCA9IGRhdGFPYmoudXJsOw0KICAgICAgfSBlbHNlIGlmIChkYXRhc3RyLmluY2x1ZGVzKCJSRVRVUk5fREJfU1RBVFVTIikgJiYgZGF0YU9iai5zdGF0dXMgIT0gIiIpIHsNCiAgICAgICAgaWYgKCFkYXRhc3RyLmluY2x1ZGVzKCJmYWxzZSIpKSB7DQogICAgICAgICAgdGhpcy5haUxvZ2luRGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuYWlMb2dpblN0YXR1cy5kb3ViYW8gPSB0cnVlOw0KICAgICAgICAgIHRoaXMuYWNjb3VudHMuZG91YmFvID0gZGF0YU9iai5zdGF0dXM7DQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcuZG91YmFvID0gZmFsc2U7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5pc0NsaWNrLmRvdWJhbyA9IHRydWU7DQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcuZG91YmFvID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgIGRhdGFzdHIuaW5jbHVkZXMoIlJFVFVSTl9ERUVQU0VFS19TVEFUVVMiKSAmJg0KICAgICAgICBkYXRhT2JqLnN0YXR1cyAhPSAiIg0KICAgICAgKSB7DQogICAgICAgIGlmICghZGF0YXN0ci5pbmNsdWRlcygiZmFsc2UiKSkgew0KICAgICAgICAgIHRoaXMuYWlMb2dpbkRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmFpTG9naW5TdGF0dXMuZGVlcHNlZWsgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuYWNjb3VudHMuZGVlcHNlZWsgPSBkYXRhT2JqLnN0YXR1czsNCiAgICAgICAgICB0aGlzLmlzTG9hZGluZy5kZWVwc2VlayA9IGZhbHNlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuaXNDbGljay5kZWVwc2VlayA9IHRydWU7DQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcuZGVlcHNlZWsgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfWVsc2UgaWYoZGF0YXN0ci5pbmNsdWRlcygiUkVUVVJOX1pISUhVX1NUQVRVUyIpICYmIGRhdGFPYmouc3RhdHVzICE9ICcnKXsNCiAgICAgICBpZighZGF0YXN0ci5pbmNsdWRlcygiZmFsc2UiKSl7DQogICAgICAgIHRoaXMuYWlMb2dpbkRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5haUxvZ2luU3RhdHVzLnpoaWh1ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5hY2NvdW50cy56aGlodSA9IGRhdGFPYmouc3RhdHVzOw0KICAgICAgICB0aGlzLmlzTG9hZGluZy56aGlodSA9IGZhbHNlOw0KICAgICAgfSBlbHNlew0KICAgICAgICB0aGlzLmlzQ2xpY2suemhpaHUgPSB0cnVlOw0KICAgICAgICB0aGlzLmlzTG9hZGluZy56aGlodSA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH1lbHNlIGlmICgNCiAgICAgICAgZGF0YXN0ci5pbmNsdWRlcygiUkVUVVJOX01BWF9TVEFUVVMiKSAmJg0KICAgICAgICBkYXRhT2JqLnN0YXR1cyAhPSAiIg0KICAgICAgKSB7DQogICAgICAgIGlmICghZGF0YXN0ci5pbmNsdWRlcygiZmFsc2UiKSkgew0KICAgICAgICAgIHRoaXMuYWlMb2dpbkRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmFpTG9naW5TdGF0dXMubWluaW1heCA9IHRydWU7DQogICAgICAgICAgdGhpcy5hY2NvdW50cy5taW5pbWF4ID0gZGF0YU9iai5zdGF0dXM7DQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcubWluaW1heCA9IGZhbHNlOw0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNMb2FkaW5nLm1pbmltYXgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuaXNDbGljay5taW5pbWF4ID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLmlzTG9hZGluZy5taW5pbWF4ID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgY2xvc2VXZWJTb2NrZXQoKSB7DQogICAgICB3ZWJzb2NrZXRDbGllbnQuY2xvc2UoKTsNCiAgICB9LA0KDQogICAgc2VuZE1lc3NhZ2UoZGF0YSkgew0KICAgICAgaWYgKHdlYnNvY2tldENsaWVudC5zZW5kKGRhdGEpKSB7DQogICAgICAgIC8vIOa7muWKqOWIsOW6lemDqA0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpOw0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIldlYlNvY2tldOacqui/nuaOpSIpOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5qC85byP5YyW5pe26Ze0DQogICAgZm9ybWF0VGltZShkYXRlKSB7DQogICAgICBjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICIwIik7DQogICAgICBjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAiMCIpOw0KICAgICAgY29uc3Qgc2Vjb25kcyA9IFN0cmluZyhkYXRlLmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgIjAiKTsNCiAgICAgIHJldHVybiBgJHtob3Vyc306JHttaW51dGVzfToke3NlY29uZHN9YDsNCiAgICB9LA0KDQogICAgLy8g5rua5Yqo5Yiw5bqV6YOoDQogICAgc2Nyb2xsVG9Cb3R0b20oKSB7DQogICAgICBjb25zdCBtZXNzYWdlTGlzdCA9IHRoaXMuJHJlZnMubWVzc2FnZUxpc3Q7DQogICAgICBpZiAobWVzc2FnZUxpc3QpIHsNCiAgICAgICAgbWVzc2FnZUxpc3Quc2Nyb2xsVG9wID0gbWVzc2FnZUxpc3Quc2Nyb2xsSGVpZ2h0Ow0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlUmVmcmVzaCgpIHsNCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsNCiAgICB9LA0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIHRoaXMuY2xvc2VXZWJTb2NrZXQoKTsgLy8g6ZSA5q+B5pe25YWz6Zet6L+e5o6lDQogIH0sDQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"dashboard-editor-container\">\r\n    <!--    <panel-group @handleSetLineChartData=\"handleSetLineChartData\" />-->\r\n    <div class=\"app-container\">\r\n      <el-row :gutter=\"30\">\r\n        <el-col :span=\"6\" :xs=\"30\">\r\n          <el-card class=\"box-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <span>个人信息</span>\r\n            </div>\r\n            <div>\r\n              <div class=\"text-center\">\r\n                <userAvatar />\r\n              </div>\r\n              <ul class=\"list-group list-group-striped\">\r\n                <li class=\"list-group-item\">\r\n                  <svg-icon icon-class=\"user\" />用户名称\r\n                  <div class=\"pull-right\" id=\"userName\">\r\n                    {{ user.nickName }}\r\n                  </div>\r\n                </li>\r\n                <li class=\"list-group-item\">\r\n                  <svg-icon icon-class=\"phone\" />手机号码\r\n                  <div class=\"pull-right\">{{ user.phonenumber }}</div>\r\n                </li>\r\n                <li class=\"list-group-item\">\r\n                  <svg-icon icon-class=\"date\" />创建日期\r\n                  <div class=\"pull-right\">{{ user.createTime }}</div>\r\n                </li>\r\n                <li class=\"list-group-item\">\r\n                  <svg-icon icon-class=\"user\" />\r\n                  <span>积分余额</span>\r\n                  <div\r\n                    :style=\"{ color: user.points >= 0 ? 'green' : 'red' }\"\r\n                    class=\"pull-right\"\r\n                  >\r\n                    {{ user.points }}\r\n                  </div>\r\n                  <el-tooltip\r\n                    content=\"点击可查看积分明细\"\r\n                    placement=\"top\"\r\n                    effect=\"light\"\r\n                  >\r\n                    <i\r\n                      class=\"el-icon-chat-dot-round\"\r\n                      @click=\"showPointsDetail\"\r\n                    ></i>\r\n                  </el-tooltip>\r\n                </li>\r\n                <li class=\"list-group-item\">\r\n                  <el-button\r\n                    type=\"primary\"\r\n                    size=\"mini\"\r\n                    @click=\"handleBindWechat\"\r\n                    >绑定公众号</el-button\r\n                  >\r\n                  <!-- 移除Agent API设置按钮 -->\r\n                  <!-- 移除元器空间绑定按钮 -->\r\n\r\n                  <!-- 删除Agent API和元器空间对话框组件 -->\r\n\r\n                  <el-dialog\r\n                    title=\"绑定微信公众号\"\r\n                    :visible.sync=\"dialogFormVisible\"\r\n                  >\r\n                    <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\r\n                      <el-form-item\r\n                        label=\"appId\"\r\n                        :label-width=\"formLabelWidth\"\r\n                        prop=\"appId\"\r\n                      >\r\n                        <el-input\r\n                          v-model=\"form.appId\"\r\n                          maxlength=\"32\"\r\n                          placeholder=\"请输入appId\"\r\n                          autocomplete=\"off\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item\r\n                        label=\"appSecret\"\r\n                        :label-width=\"formLabelWidth\"\r\n                        prop=\"appSecret\"\r\n                      >\r\n                        <el-input\r\n                          v-model=\"form.appSecret\"\r\n                          maxlength=\"50\"\r\n                          placeholder=\"请输入appSecret\"\r\n                          autocomplete=\"off\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item\r\n                        label=\"公众号名称\"\r\n                        :label-width=\"formLabelWidth\"\r\n                        prop=\"officeAccountName\"\r\n                      >\r\n                        <el-input\r\n                          v-model=\"form.officeAccountName\"\r\n                          maxlength=\"50\"\r\n                          placeholder=\"请输入公众号名称\"\r\n                          autocomplete=\"off\"\r\n                        ></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item\r\n                        label=\"素材封面图\"\r\n                        :label-width=\"formLabelWidth\"\r\n                        prop=\"picUrl\"\r\n                      >\r\n                        <image-upload v-model=\"form.picUrl\" />\r\n                      </el-form-item>\r\n                      <el-form-item\r\n                        label=\"规范说明\"\r\n                        :label-width=\"formLabelWidth\"\r\n                      >\r\n                        <div style=\"color: #f56c6c; font-size: 13px\">\r\n                          请把IP: 175.178.154.216\r\n                          添加到公众号IP白名单。步骤：登录微信公众平台→点击设置与开发→安全中心→IP白名单。一般一小时后生效。\r\n                        </div>\r\n                      </el-form-item>\r\n                    </el-form>\r\n                    <div slot=\"footer\" class=\"dialog-footer\">\r\n                      <el-button @click=\"dialogFormVisible = false\"\r\n                        >取 消</el-button\r\n                      >\r\n                      <el-button type=\"primary\" @click=\"confirmBind\"\r\n                        >确 定</el-button\r\n                      >\r\n                    </div>\r\n                  </el-dialog>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"6\" :xs=\"30\">\r\n          <el-card class=\"box-card ai-status-card\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n              <span class=\"card-title\">\r\n                <svg-icon icon-class=\"ai\" class=\"title-icon\" />\r\n                AI 登录状态\r\n              </span>\r\n              <el-button\r\n                style=\"float: right; margin-top: -30px\"\r\n                type=\"text\"\r\n                @click=\"handleRefresh\"\r\n              >\r\n                <i class=\"el-icon-refresh\"></i> 刷新\r\n              </el-button>\r\n            </div>\r\n            <div class=\"ai-status-list\">\r\n              <div\r\n                class=\"ai-status-item\"\r\n                v-for=\"(status, type) in aiLoginStatus\"\r\n                :key=\"type\"\r\n              >\r\n                <div class=\"ai-platform\">\r\n                  <div class=\"platform-icon\">\r\n                    <img\r\n                      :src=\"getPlatformIcon(type)\"\r\n                      :alt=\"getPlatformName(type)\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"platform-name\">\r\n                    {{ getPlatformName(type) }}\r\n                    <el-tooltip\r\n                      v-if=\"isLoading[type]\"\r\n                      content=\"正在登录中...\"\r\n                      placement=\"top\"\r\n                    >\r\n                      <i class=\"el-icon-loading loading-icon\"></i>\r\n                    </el-tooltip>\r\n                  </div>\r\n                </div>\r\n                <div class=\"status-action\">\r\n                  <el-tag\r\n                    v-if=\"status\"\r\n                    type=\"success\"\r\n                    effect=\"dark\"\r\n                    class=\"status-tag\"\r\n                  >\r\n                    <i class=\"el-icon-success\"></i>\r\n                    <span>{{ accounts[type] }}</span>\r\n                  </el-tag>\r\n                  <el-button\r\n                    v-else\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    :disabled=\"!isClick[type]\"\r\n                    @click=\"handleAiLogin(type)\"\r\n                    class=\"login-btn\"\r\n                  >\r\n                    <i class=\"el-icon-connection\"></i> 点击登录\r\n                  </el-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n\r\n    <!-- AI登录二维码对话框 -->\r\n    <el-dialog\r\n      :title=\"getAiLoginTitle\"\r\n      :visible.sync=\"aiLoginDialogVisible\"\r\n      width=\"1200px\"\r\n      height=\"800px\"\r\n      center\r\n    >\r\n      <div class=\"qr-code-container\" v-loading=\"!qrCodeUrl\">\r\n        <div v-if=\"qrCodeUrl\" class=\"qr-code\">\r\n          <img\r\n            style=\"width: 100%; height: 100%\"\r\n            :src=\"qrCodeUrl\"\r\n            alt=\"登录二维码\"\r\n          />\r\n          <p class=\"qr-tip\">请使用对应AI平台APP扫码登录</p>\r\n        </div>\r\n        <div v-else class=\"loading-tip\">正在获取登录二维码...</div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      title=\"积分详细\"\r\n      :visible.sync=\"openPointsRecord\"\r\n      width=\"1000px\"\r\n      append-to-body\r\n    >\r\n      <el-select\r\n        v-model=\"queryPointForm.type\"\r\n        placeholder=\"积分类型\"\r\n        clearable\r\n        style=\"width: 240px; margin-bottom: 10px\"\r\n        @change=\"getUserPointsRecord\"\r\n      >\r\n        <el-option\r\n          v-for=\"dict in changeType\"\r\n          :key=\"dict.value\"\r\n          :label=\"dict.label\"\r\n          :value=\"dict.value\"\r\n        />\r\n      </el-select>\r\n      <el-table v-loading=\"loading\" :data=\"pointsRecordList\">\r\n        <el-table-column\r\n          label=\"用户昵称\"\r\n          align=\"center\"\r\n          key=\"nick_name\"\r\n          prop=\"nick_name\"\r\n          :show-overflow-tooltip=\"true\"\r\n        />\r\n        <el-table-column\r\n          label=\"变更数量\"\r\n          align=\"center\"\r\n          key=\"change_amount\"\r\n          prop=\"change_amount\"\r\n          :show-overflow-tooltip=\"true\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span\r\n              :style=\"{ color: scope.row.change_amount >= 0 ? 'green' : 'red' }\"\r\n            >\r\n              {{ scope.row.change_amount }}\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"积分余额\"\r\n          align=\"center\"\r\n          key=\"balance_after\"\r\n          prop=\"balance_after\"\r\n          :show-overflow-tooltip=\"true\"\r\n        />\r\n        <el-table-column\r\n          label=\"变更类型\"\r\n          align=\"center\"\r\n          key=\"change_type\"\r\n          prop=\"change_type\"\r\n        />\r\n        <el-table-column\r\n          width=\"200\"\r\n          label=\"变更时间\"\r\n          align=\"center\"\r\n          prop=\"create_time\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ parseTime(scope.row.create_time) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"操作人\"\r\n          align=\"center\"\r\n          key=\"create_name\"\r\n          prop=\"create_name\"\r\n        />\r\n        <el-table-column\r\n          label=\"备注\"\r\n          align=\"center\"\r\n          key=\"remark\"\r\n          prop=\"remark\"\r\n        />\r\n      </el-table>\r\n      <pagination\r\n        v-show=\"pointtotal > 0\"\r\n        :total=\"pointtotal\"\r\n        :page.sync=\"queryPointForm.page\"\r\n        :limit.sync=\"queryPointForm.limit\"\r\n        @pagination=\"getUserPointsRecord\"\r\n      />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PanelGroup from \"./dashboard/PanelGroup\";\r\nimport LineChart from \"./dashboard/LineChart\";\r\nimport RaddarChart from \"./dashboard/RaddarChart\";\r\nimport PieChart from \"./dashboard/PieChart\";\r\nimport BarChart from \"./dashboard/BarChart\";\r\nimport userAvatar from \"@/views/system/user/profile/userAvatar\";\r\nimport userInfo from \"@/views/system/user/profile/userInfo\";\r\nimport resetPwd from \"@/views/system/user/profile/resetPwd\";\r\nimport {\r\n  getUserProfile,\r\n  bindWcOfficeAccount,\r\n  getOfficeAccount,\r\n} from \"@/api/system/user\";\r\nimport { getUserPointsRecord } from \"@/api/wechat/company\";\r\nimport websocketClient from \"@/utils/websocket\";\r\n\r\nconst lineChartData = {\r\n  newVisitis: {\r\n    expectedData: [100, 120, 161, 134, 105, 160, 165],\r\n    actualData: [120, 82, 91, 154, 162, 140, 145],\r\n  },\r\n  messages: {\r\n    expectedData: [200, 192, 120, 144, 160, 130, 140],\r\n    actualData: [180, 160, 151, 106, 145, 150, 130],\r\n  },\r\n  purchases: {\r\n    expectedData: [80, 100, 121, 104, 105, 90, 100],\r\n    actualData: [120, 90, 100, 138, 142, 130, 130],\r\n  },\r\n  shoppings: {\r\n    expectedData: [130, 140, 141, 142, 145, 150, 160],\r\n    actualData: [120, 82, 91, 154, 162, 140, 130],\r\n  },\r\n};\r\n\r\nexport default {\r\n  name: \"Index\",\r\n  components: {\r\n    PanelGroup,\r\n    LineChart,\r\n    RaddarChart,\r\n    PieChart,\r\n    BarChart,\r\n    userAvatar,\r\n    userInfo,\r\n    resetPwd,\r\n  },\r\n  data() {\r\n    return {\r\n      lineChartData: lineChartData.newVisitis,\r\n      user: {},\r\n      roleGroup: {},\r\n      postGroup: {},\r\n      activeTab: \"userinfo\",\r\n      //------ 绑定公众号相关变量 ------//\r\n      dialogFormVisible: false, // 绑定公众号弹窗\r\n      dialogAgentFormVisible: false, // 绑定智能体弹窗\r\n      dialogSpaceFormVisible: false, // 绑定元器空间弹窗\r\n      form: {\r\n        appId: \"\", // 公众号appId\r\n        appSecret: \"\", // 公众号appSecret\r\n        officeAccountName: \"\", // 公众号名称\r\n        picUrl: \"\", // 公众号封面图\r\n      },\r\n      // 删除Agent和Space相关表单\r\n      formLabelWidth: \"120px\", //输入框宽度\r\n      // 绑定公众号表单验证规则\r\n      rules: {\r\n        appId: [{ required: true, message: \"请输入appId\", trigger: \"blur\" }],\r\n        appSecret: [\r\n          { required: true, message: \"请输入appSecret\", trigger: \"blur\" },\r\n        ],\r\n        officeAccountName: [\r\n          { required: false, message: \"请输入公众号名称\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      // 删除Agent和Space相关验证规则\r\n\r\n      //------ 积分相关变量 ------//\r\n      loading: true, // 遮罩层\r\n      changeType: [\r\n        {\r\n          label: \"全部\",\r\n          value: \"0\",\r\n        },\r\n        {\r\n          label: \"增加\",\r\n          value: \"1\",\r\n        },\r\n        {\r\n          label: \"消耗\",\r\n          value: \"2\",\r\n        },\r\n      ], // 积分明细表中的积分类型\r\n      openPointsRecord: false, // 积分明细弹窗\r\n      pointtotal: 0, // 积分明细总数\r\n      queryPointForm: {\r\n        limit: 10,\r\n        page: 1,\r\n        type: \"\",\r\n        userId: \"\",\r\n      }, // 积分明细查询需要的查询参数\r\n      pointsRecordList: null, // 积分明细列表\r\n\r\n      //------ 签到相关变量 ------//\r\n      weekDays: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"],\r\n      currentYear: new Date().getFullYear(),\r\n      currentMonth: new Date().getMonth() + 1,\r\n      continuousSignInDays: 7,\r\n      monthlySignInDays: 15,\r\n      totalSignInDays: 128,\r\n      todaySignedIn: false,\r\n      signInHistory: [\r\n        { date: \"2024-01-15\", time: \"08:30:25\" },\r\n        { date: \"2024-01-14\", time: \"09:15:33\" },\r\n        { date: \"2024-01-13\", time: \"07:45:12\" },\r\n        { date: \"2024-01-12\", time: \"08:20:45\" },\r\n        { date: \"2024-01-11\", time: \"09:00:18\" },\r\n      ],\r\n      signedDates: [\r\n        new Date(2024, 0, 1),\r\n        new Date(2024, 0, 2),\r\n        new Date(2024, 0, 3),\r\n        new Date(2024, 0, 4),\r\n        new Date(2024, 0, 5),\r\n      ],\r\n      aiLoginStatus: {\r\n        doubao: false,\r\n        deepseek: false,\r\n        zhihu: false,\r\n         minimax: false\r\n      },\r\n      accounts: {\r\n        doubao: '',\r\n        deepseek: '',\r\n        zhihu: '',\r\n        minimax: ''\r\n      },\r\n      isClick: {\r\n        doubao: false,\r\n        deepseek: false,\r\n        zhihu: false,\r\n        minimax: false,\r\n      },\r\n      aiLoginDialogVisible: false,\r\n      currentAiType: \"\",\r\n      qrCodeUrl: \"\",\r\n      // 消息相关变量\r\n      messages: [],\r\n      messageInput: \"\",\r\n      isLoading: {\r\n        doubao: true,\r\n        deepseek: true,\r\n        zhihu: true,\r\n        minimax: true,\r\n      }\r\n    }\r\n  },\r\n  // 计算当前月份的签到日期\r\n  computed: {\r\n    calendarDates() {\r\n      const dates = [];\r\n      const firstDay = new Date(this.currentYear, this.currentMonth - 1, 1);\r\n      const lastDay = new Date(this.currentYear, this.currentMonth, 0);\r\n\r\n      // Fill in empty slots before first day\r\n      for (let i = 0; i < firstDay.getDay(); i++) {\r\n        dates.push(null);\r\n      }\r\n\r\n      // Fill in days of the month\r\n      for (let i = 1; i <= lastDay.getDate(); i++) {\r\n        dates.push(new Date(this.currentYear, this.currentMonth - 1, i));\r\n      }\r\n\r\n      return dates;\r\n    },\r\n    getAiLoginTitle() {\r\n      const titles = {\r\n        doubao: '豆包登录',\r\n        deepseek: 'DeepSeek登录',\r\n        zhihu: '知乎直答登录',\r\n        minimax: \"MiniMax登录\",\r\n      };\r\n      return titles[this.currentAiType] || \"登录\";\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.getUser();\r\n  },\r\n  methods: {\r\n    handleSetLineChartData(type) {\r\n      this.lineChartData = lineChartData[type];\r\n    },\r\n    getUser() {\r\n      getUserProfile().then((response) => {\r\n        this.user = response.data;\r\n        this.roleGroup = response.roleGroup;\r\n        this.postGroup = response.postGroup;\r\n        this.userId = response.data.userId;\r\n        this.corpId = response.data.corpId;\r\n\r\n        this.initWebSocket(this.userId); // 创建时建立连接\r\n\r\n        setTimeout(() => {\r\n          // 检查豆包登录状态\r\n          this.sendMessage({\r\n            type: \"PLAY_CHECK_DB_LOGIN\",\r\n            userId: this.userId,\r\n            corpId: this.corpId,\r\n          });\r\n          // 检查MiniMax登录状态\r\n          this.sendMessage({\r\n            type: \"PLAY_CHECK_MAX_LOGIN\",\r\n            userId: this.userId,\r\n            corpId: this.corpId,\r\n          });\r\n          // 检查DeepSeek登录状态\r\n          this.sendMessage({\r\n            type: \"PLAY_CHECK_DEEPSEEK_LOGIN\",\r\n            userId: this.userId,\r\n            corpId: this.corpId,\r\n          });\r\n          this.sendMessage({\r\n            type: 'PLAY_CHECK_ZHIHU_LOGIN',\r\n            userId: this.userId,\r\n            corpId: this.corpId\r\n          })\r\n          // 检查通义千问登录状态\r\n          // this.sendMessage({\r\n          //   type: 'PLAY_CHECK_QW_LOGIN',\r\n          //   userId: this.userId,\r\n          //   corpId: this.corpId\r\n          // });\r\n        }, 1000);\r\n      });\r\n    },\r\n    // 获取公众号信息\r\n    handleBindWechat() {\r\n      getOfficeAccount().then((response) => {\r\n        if (response.data != null) {\r\n          this.form.appId = response.data.appId;\r\n          this.form.appSecret = response.data.appSecret;\r\n          this.form.officeAccountName = response.data.officeAccountName;\r\n          this.form.picUrl = response.data.picUrl;\r\n        }\r\n        this.dialogFormVisible = true;\r\n      });\r\n    },\r\n    // 绑定公众号\r\n    confirmBind() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          // 表单验证通过，继续提交\r\n          bindWcOfficeAccount(this.form).then((response) => {\r\n            this.$message.success(response.data);\r\n            this.dialogFormVisible = false;\r\n          });\r\n        } else {\r\n          // 表单验证失败\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 获取当前登录用户积分明细\r\n    showPointsDetail() {\r\n      this.queryPointForm.userId = this.user.userId;\r\n      this.getUserPointsRecord();\r\n    },\r\n    // 获取积分明细\r\n    getUserPointsRecord() {\r\n      getUserPointsRecord(this.queryPointForm).then((response) => {\r\n        this.openPointsRecord = true;\r\n        this.pointsRecordList = response.data.list;\r\n        this.pointtotal = response.data.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n    // 获取当前月份的签到日期\r\n    isSignedDate(date) {\r\n      if (!date) return false;\r\n      return this.signedDates.some(\r\n        (signedDate) =>\r\n          signedDate.getDate() === date.getDate() &&\r\n          signedDate.getMonth() === date.getMonth() &&\r\n          signedDate.getFullYear() === date.getFullYear()\r\n      );\r\n    },\r\n    isToday(date) {\r\n      if (!date) return false;\r\n      const today = new Date();\r\n      return (\r\n        date.getDate() === today.getDate() &&\r\n        date.getMonth() === today.getMonth() &&\r\n        date.getFullYear() === today.getFullYear()\r\n      );\r\n    },\r\n    isFutureDate(date) {\r\n      if (!date) return false;\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      return date > today;\r\n    },\r\n    handleSignIn() {\r\n      if (!this.todaySignedIn) {\r\n        this.todaySignedIn = true;\r\n        this.signedDates.push(new Date());\r\n        const now = new Date();\r\n        this.signInHistory.unshift({\r\n          date: `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(\r\n            2,\r\n            \"0\"\r\n          )}-${String(now.getDate()).padStart(2, \"0\")}`,\r\n          time: `${String(now.getHours()).padStart(2, \"0\")}:${String(\r\n            now.getMinutes()\r\n          ).padStart(2, \"0\")}:${String(now.getSeconds()).padStart(2, \"0\")}`,\r\n        });\r\n        this.monthlySignInDays++;\r\n        this.totalSignInDays++;\r\n      }\r\n    },\r\n    handleAiLogin(type) {\r\n      this.currentAiType = type;\r\n      this.aiLoginDialogVisible = true;\r\n      this.isLoading[type] = true;\r\n      this.getQrCode(type);\r\n    },\r\n    getQrCode(type) {\r\n      this.qrCodeUrl = ''\r\n      if(type == 'zhihu'){\r\n        this.sendMessage({\r\n          type: 'PLAY_GET_ZHIHU_QRCODE',\r\n          userId: this.userId,\r\n          corpId: this.corpId\r\n        })\r\n      }\r\n      if(type == 'doubao'){\r\n        this.sendMessage({\r\n          type: \"PLAY_GET_DB_QRCODE\",\r\n          userId: this.userId,\r\n          corpId: this.corpId,\r\n        });\r\n      }\r\n      if(type == 'deepseek'){\r\n        this.sendMessage({\r\n          type: 'PLAY_GET_DEEPSEEK_QRCODE',\r\n          userId: this.userId,\r\n          corpId: this.corpId\r\n        });\r\n      }\r\n      if (type == \"minimax\") {\r\n        this.sendMessage({\r\n          type: \"PLAY_GET_MAX_QRCODE\",\r\n          userId: this.userId,\r\n          corpId: this.corpId,\r\n        });\r\n      }\r\n      this.$message({\r\n        message: \"正在获取登录二维码...\",\r\n        type: \"info\",\r\n      });\r\n    },\r\n    getPlatformIcon(type) {\r\n      const icons = {\r\n        doubao: require('@/assets/logo/doubao.png'),\r\n        deepseek: require('@/assets/logo/Deepseek.png'),\r\n        zhihu: require('@/assets/logo/zhihu.png'),\r\n        minimax: require(\"@/assets/logo/MiniMax.png\"),\r\n      };\r\n      return icons[type] || \"\";\r\n    },\r\n    getPlatformName(type) {\r\n      const names = {\r\n        doubao: '豆包',\r\n        deepseek: 'DeepSeek',\r\n        zhihu: '知乎直答',\r\n        minimax: \"MiniMax\",\r\n\r\n      };\r\n      return names[type] || \"\";\r\n    },\r\n    // WebSocket 相关方法\r\n    initWebSocket(id) {\r\n      const wsUrl = process.env.VUE_APP_WS_API + `mypc-${id}`;\r\n      console.log(\"WebSocket URL:\", process.env.VUE_APP_WS_API);\r\n      websocketClient.connect(wsUrl, (event) => {\r\n        switch (event.type) {\r\n          case \"open\":\r\n            this.$message.success(\"正在获取最新登录状态，请稍后...\");\r\n            break;\r\n          case \"message\":\r\n            this.handleWebSocketMessage(event.data);\r\n            break;\r\n          case \"close\":\r\n            this.$message.warning(\"WebSocket连接已关闭\");\r\n            break;\r\n          case \"error\":\r\n            this.$message.error(\"WebSocket连接错误\");\r\n            break;\r\n          case \"reconnect_failed\":\r\n            this.$message.error(\"WebSocket重连失败，请刷新页面重试\");\r\n            break;\r\n        }\r\n      });\r\n    },\r\n\r\n    handleWebSocketMessage(data) {\r\n      console.log(\"收到消息:\", data);\r\n      const datastr = data;\r\n      const dataObj = JSON.parse(datastr);\r\n\r\n     if (datastr.includes(\"RETURN_PC_DB_QRURL\")||\r\n     datastr.includes(\"RETURN_PC_DEEPSEEK_QRURL\")||\r\n     datastr.includes(\"RETURN_PC_ZHIHU_QRURL\")||\r\n    datastr.includes(\"RETURN_PC_MAX_QRURL\")) {\r\n        this.qrCodeUrl = dataObj.url;\r\n      } else if (datastr.includes(\"RETURN_DB_STATUS\") && dataObj.status != \"\") {\r\n        if (!datastr.includes(\"false\")) {\r\n          this.aiLoginDialogVisible = false;\r\n          this.aiLoginStatus.doubao = true;\r\n          this.accounts.doubao = dataObj.status;\r\n          this.isLoading.doubao = false;\r\n        } else {\r\n          this.isClick.doubao = true;\r\n          this.isLoading.doubao = false;\r\n        }\r\n      } else if (\r\n        datastr.includes(\"RETURN_DEEPSEEK_STATUS\") &&\r\n        dataObj.status != \"\"\r\n      ) {\r\n        if (!datastr.includes(\"false\")) {\r\n          this.aiLoginDialogVisible = false;\r\n          this.aiLoginStatus.deepseek = true;\r\n          this.accounts.deepseek = dataObj.status;\r\n          this.isLoading.deepseek = false;\r\n        } else {\r\n          this.isClick.deepseek = true;\r\n          this.isLoading.deepseek = false;\r\n        }\r\n      }else if(datastr.includes(\"RETURN_ZHIHU_STATUS\") && dataObj.status != ''){\r\n       if(!datastr.includes(\"false\")){\r\n        this.aiLoginDialogVisible = false;\r\n        this.aiLoginStatus.zhihu = true;\r\n        this.accounts.zhihu = dataObj.status;\r\n        this.isLoading.zhihu = false;\r\n      } else{\r\n        this.isClick.zhihu = true;\r\n        this.isLoading.zhihu = false;\r\n      }\r\n    }else if (\r\n        datastr.includes(\"RETURN_MAX_STATUS\") &&\r\n        dataObj.status != \"\"\r\n      ) {\r\n        if (!datastr.includes(\"false\")) {\r\n          this.aiLoginDialogVisible = false;\r\n          this.aiLoginStatus.minimax = true;\r\n          this.accounts.minimax = dataObj.status;\r\n          this.isLoading.minimax = false;\r\n          console.log(this.isLoading.minimax);\r\n        } else {\r\n          this.isClick.minimax = true;\r\n          this.isLoading.minimax = false;\r\n        }\r\n      }\r\n    },\r\n\r\n    closeWebSocket() {\r\n      websocketClient.close();\r\n    },\r\n\r\n    sendMessage(data) {\r\n      if (websocketClient.send(data)) {\r\n        // 滚动到底部\r\n        this.$nextTick(() => {\r\n          this.scrollToBottom();\r\n        });\r\n      } else {\r\n        this.$message.error(\"WebSocket未连接\");\r\n      }\r\n    },\r\n    // 格式化时间\r\n    formatTime(date) {\r\n      const hours = String(date.getHours()).padStart(2, \"0\");\r\n      const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n      const seconds = String(date.getSeconds()).padStart(2, \"0\");\r\n      return `${hours}:${minutes}:${seconds}`;\r\n    },\r\n\r\n    // 滚动到底部\r\n    scrollToBottom() {\r\n      const messageList = this.$refs.messageList;\r\n      if (messageList) {\r\n        messageList.scrollTop = messageList.scrollHeight;\r\n      }\r\n    },\r\n    handleRefresh() {\r\n      window.location.reload();\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.closeWebSocket(); // 销毁时关闭连接\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard-editor-container {\r\n  padding: 32px;\r\n  background-color: rgb(240, 242, 245);\r\n  position: relative;\r\n\r\n  .chart-wrapper {\r\n    background: #fff;\r\n    padding: 16px 16px 0;\r\n    margin-bottom: 32px;\r\n  }\r\n}\r\n\r\n@media (max-width: 1024px) {\r\n  .chart-wrapper {\r\n    padding: 8px;\r\n  }\r\n}\r\n\r\n// 签到日历样式\r\n.sign-in-container {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px 16px;\r\n  font-size: 13px;\r\n  color: #333333;\r\n}\r\n\r\n.stats-cards {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.stats-card {\r\n  flex: 1;\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.stats-number {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n  color: #ff6b6b;\r\n}\r\n\r\n.stats-label {\r\n  color: #666666;\r\n}\r\n\r\n.calendar-section {\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.calendar-header {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.month-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.weekdays {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  text-align: center;\r\n  color: #666666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.calendar-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(7, 1fr);\r\n  gap: 4px;\r\n}\r\n\r\n.calendar-day {\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.calendar-day.signed {\r\n  background-color: #ff6b6b;\r\n  color: white;\r\n}\r\n\r\n.calendar-day.today {\r\n  border: 2px solid #ff6b6b;\r\n}\r\n\r\n.calendar-day.future {\r\n  color: #999999;\r\n}\r\n\r\n.calendar-day.empty {\r\n  background: none;\r\n}\r\n\r\n.sign-in-button {\r\n  width: 100%;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  margin-bottom: 20px;\r\n  background-color: #ff6b6b;\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.sign-in-button:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.history-section {\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.history-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.history-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 12px 0;\r\n  border-bottom: 1px solid #eeeeee;\r\n}\r\n\r\n.history-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.history-time {\r\n  color: #666666;\r\n}\r\n\r\n.pull-right .el-button--text {\r\n  padding: 0;\r\n  color: #409eff;\r\n}\r\n\r\n.qr-code-container {\r\n  padding: 20px;\r\n  text-align: center;\r\n  min-height: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.qr-code {\r\n  img {\r\n    width: 1600px;\r\n    height: 600px;\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n\r\n.qr-tip {\r\n  color: #666;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.loading-tip {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.ai-status-card {\r\n  .card-title {\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #303133;\r\n\r\n    .title-icon {\r\n      margin-right: 8px;\r\n      font-size: 18px;\r\n      color: #409eff;\r\n    }\r\n  }\r\n\r\n  .el-button--text {\r\n    color: #409eff;\r\n    font-size: 14px;\r\n\r\n    &:hover {\r\n      color: #66b1ff;\r\n    }\r\n\r\n    i {\r\n      margin-right: 4px;\r\n    }\r\n  }\r\n\r\n  .ai-status-list {\r\n    .ai-status-item {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      padding: 12px 0;\r\n      border-bottom: 1px solid #ebeef5;\r\n      flex-wrap: nowrap; /* 防止项目换行 */\r\n      overflow: hidden; /* 防止内容溢出 */\r\n\r\n      &:last-child {\r\n        border-bottom: none;\r\n      }\r\n\r\n      .ai-platform {\r\n        display: flex;\r\n        align-items: center;\r\n        flex: 1;\r\n        min-width: 0; /* 防止flex子元素溢出 */\r\n\r\n        .platform-icon {\r\n          width: 32px;\r\n          height: 32px;\r\n          border-radius: 50%;\r\n          background: #f5f7fa;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          margin-right: 12px;\r\n          overflow: hidden;\r\n          flex-shrink: 0; /* 防止图标被压缩 */\r\n\r\n          img {\r\n            width: 100%;\r\n            height: 100%;\r\n            object-fit: cover;\r\n          }\r\n        }\r\n\r\n        .platform-name {\r\n          font-size: 14px;\r\n          color: #606266;\r\n          font-weight: 500;\r\n          display: flex;\r\n          align-items: center;\r\n          flex-wrap: wrap; /* 允许内容换行 */\r\n          word-break: break-word; /* 允许在任意字符间断行 */\r\n          min-width: 0; /* 防止文本溢出 */\r\n          overflow: hidden; /* 防止文本溢出 */\r\n\r\n          .loading-icon {\r\n            margin-left: 8px;\r\n            color: #409eff;\r\n            font-size: 16px;\r\n            animation: rotating 2s linear infinite;\r\n          }\r\n        }\r\n      }\r\n\r\n      .status-action {\r\n        flex-shrink: 0; /* 防止按钮被压缩 */\r\n        margin-left: 8px; /* 与平台名称保持距离 */\r\n\r\n        .status-tag {\r\n          padding: 0px 12px;\r\n          border-radius: 16px;\r\n          white-space: nowrap; /* 防止标签文本换行 */\r\n\r\n          i {\r\n            margin-right: 4px;\r\n          }\r\n        }\r\n\r\n        .login-btn {\r\n          padding: 6px 12px;\r\n          border-radius: 16px;\r\n          white-space: nowrap; /* 防止按钮文本换行 */\r\n\r\n          i {\r\n            margin-right: 4px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.qr-code-container {\r\n  padding: 20px;\r\n  text-align: center;\r\n  min-height: 550px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f5f7fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.qr-code {\r\n  background: #ffffff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n\r\n  img {\r\n    width: 1000px;\r\n    height: 550px;\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n\r\n.qr-tip {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  font-weight: 500;\r\n}\r\n\r\n.loading-tip {\r\n  color: #909399;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  &::before {\r\n    content: \"\";\r\n    display: inline-block;\r\n    width: 16px;\r\n    height: 16px;\r\n    margin-right: 8px;\r\n    border: 2px solid #dcdfe6;\r\n    border-top-color: #409eff;\r\n    border-radius: 50%;\r\n    animation: loading 1s linear infinite;\r\n  }\r\n}\r\n\r\n@keyframes loading {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.message-card {\r\n  margin-top: 20px;\r\n\r\n  .message-list {\r\n    height: 300px;\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n    background: #f5f7fa;\r\n    border-radius: 4px;\r\n\r\n    .message-item {\r\n      margin-bottom: 10px;\r\n\r\n      .message-content {\r\n        max-width: 80%;\r\n\r\n        .message-time {\r\n          font-size: 12px;\r\n          color: #909399;\r\n          margin-bottom: 4px;\r\n        }\r\n\r\n        .message-text {\r\n          padding: 8px 12px;\r\n          border-radius: 4px;\r\n          word-break: break-all;\r\n        }\r\n      }\r\n    }\r\n\r\n    .message-send {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n\r\n      .message-content {\r\n        .message-text {\r\n          background: #409eff;\r\n          color: white;\r\n        }\r\n      }\r\n    }\r\n\r\n    .message-receive {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n\r\n      .message-content {\r\n        .message-text {\r\n          background: white;\r\n          color: #303133;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .message-input {\r\n    margin-top: 10px;\r\n  }\r\n}\r\n\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n"]}]}