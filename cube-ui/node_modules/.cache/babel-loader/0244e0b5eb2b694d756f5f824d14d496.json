{"remainingRequest":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\src\\views\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\src\\views\\login.vue","mtime":1752382983658},{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\babel.config.js","mtime":1752382983593},{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752387764959},{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1752387764613},{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752387764959},{"path":"D:\\U3W-AIProject_false\\U3W-AI\\cube-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1752387756652}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9VM1ctQUlQcm9qZWN0X2ZhbHNlL1UzVy1BSS9jdWJlLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwp2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovVTNXLUFJUHJvamVjdF9mYWxzZS9VM1ctQUkvY3ViZS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9yZWdlbmVyYXRvci5qcyIpKTsKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovVTNXLUFJUHJvamVjdF9mYWxzZS9VM1ctQUkvY3ViZS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIikpOwp2YXIgX2xvZ28gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvYXNzZXRzL2xvZ28vbG9nby5qcGciKSk7CnZhciBfbG9naW4gPSByZXF1aXJlKCJAL2FwaS9sb2dpbiIpOwp2YXIgX2pzQ29va2llID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcy1jb29raWUiKSk7CnZhciBfanNlbmNyeXB0ID0gcmVxdWlyZSgiQC91dGlscy9qc2VuY3J5cHQiKTsKdmFyIF9xcmNvZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInFyY29kZSIpKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dvOiBfbG9nby5kZWZhdWx0LAogICAgICBjb2RlVXJsOiAiIiwKICAgICAgdGlja2V0OiAiIiwKICAgICAgc2l6ZTogMTgwLAogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB0aWNrZXQ6ICIiCiAgICAgIH0sCiAgICAgIHFyQ29kZURhdGFVcmw6ICIiLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g6aqM6K+B56CB5byA5YWzCiAgICAgIGNhcHRjaGFFbmFibGVkOiB0cnVlLAogICAgICAvLyDms6jlhozlvIDlhbMKICAgICAgcmVnaXN0ZXI6IGZhbHNlLAogICAgICByZWRpcmVjdDogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHJvdXRlKSB7CiAgICAgICAgdGhpcy5yZWRpcmVjdCA9IHJvdXRlLnF1ZXJ5ICYmIHJvdXRlLnF1ZXJ5LnJlZGlyZWN0OwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICB2YXIgcGFyYW1zID0gdXJsLnNwbGl0KCc/JylbMV07CiAgICB2YXIgcGFyYW1zT2JqID0ge307CiAgICBpZiAocGFyYW1zKSB7CiAgICAgIHZhciBwYXJhbXNBcnIgPSBwYXJhbXMuc3BsaXQoJyYnKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNBcnJbaV0uc3BsaXQoJz0nKTsKICAgICAgICBwYXJhbXNPYmpbcGFyYW1bMF1dID0gcGFyYW1bMV07CiAgICAgIH0KICAgIH0KICAgIHZhciBwYXJhbVZhbHVlID0gcGFyYW1zT2JqWydjb2RlJ107CiAgICBpZiAocGFyYW1WYWx1ZSkgewogICAgICB0aGlzLmxvZ2luRm9ybS5jb2RlID0gcGFyYW1WYWx1ZTsKICAgICAgdGhpcy53ZUxvZ2luKCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMuZ2V0Q29va2llKCk7CiAgICB0aGlzLmdlbmVyYXRlUVJDb2RlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZW5lcmF0ZVFSQ29kZTogZnVuY3Rpb24gZ2VuZXJhdGVRUkNvZGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yMi5kZWZhdWx0KSgpLm0oZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCBfdDsKICAgICAgICByZXR1cm4gKDAsIF9yZWdlbmVyYXRvcjIuZGVmYXVsdCkoKS53KGZ1bmN0aW9uIChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucCA9IF9jb250ZXh0Lm4pIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnAgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm4gPSAxOwogICAgICAgICAgICAgIHJldHVybiAoMCwgX2xvZ2luLmdldFFyQ29kZSkoKTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnY7CiAgICAgICAgICAgICAgX3RoaXMuY29kZVVybCA9IHJlcy51cmw7CiAgICAgICAgICAgICAgX3RoaXMudGlja2V0ID0gcmVzLnRpY2tldDsKICAgICAgICAgICAgICBfY29udGV4dC5uID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3FyY29kZS5kZWZhdWx0LnRvRGF0YVVSTChfdGhpcy5jb2RlVXJsLCB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjAwLAogICAgICAgICAgICAgICAgaGVpZ2h0OiAyMDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF90aGlzLnFyQ29kZURhdGFVcmwgPSBfY29udGV4dC52OwogICAgICAgICAgICAgIF90aGlzLnN0YXJ0Q2hlY2tMb2dpbihfdGhpcy50aWNrZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm4gPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQucCA9IDM7CiAgICAgICAgICAgICAgX3QgPSBfY29udGV4dC52OwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIueUn+aIkOS6jOe7tOeggeWksei0pSIsIF90KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hKDIpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgM11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc3RhcnRDaGVja0xvZ2luOiBmdW5jdGlvbiBzdGFydENoZWNrTG9naW4odGlja2V0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmxvZ2luRm9ybS50aWNrZXQgPSB0aWNrZXQ7CiAgICAgIHRoaXMudGFzayA9IHNldEludGVydmFsKC8qI19fUFVSRV9fKi8oMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yMi5kZWZhdWx0KSgpLm0oZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3IyLmRlZmF1bHQpKCkudyhmdW5jdGlvbiAoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIubikgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goIk9mZmljZUxvZ2luIiwgX3RoaXMyLmxvZ2luRm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmICgoMCwgX2F1dGguZ2V0VG9rZW4pKCkpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYmVmb3JlRGVzdHJveSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIHBhdGg6IF90aGlzMi5yZWRpcmVjdCB8fCAiLyIKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ajgOafpeeZu+W9leeKtuaAgeWksei0pScsIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmEoMik7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSksIDIwMDApOwogICAgfSwKICAgIC8vIOWBnOatouWumuaXtuS7u+WKoe+8iOS+i+WmguWcqOe7hOS7tumUgOavgeaXtu+8iQogICAgc3RvcENoZWNrTG9naW46IGZ1bmN0aW9uIHN0b3BDaGVja0xvZ2luKCkgewogICAgICBpZiAodGhpcy50YXNrKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRhc2spOwogICAgICAgIHRoaXMudGFzayA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgICAvLyDlnKjnu4Tku7bplIDmr4Hml7bmuIXnkIblrprml7blmajvvIzpgb/lhY3lhoXlrZjms4TmvI8KICAgICAgdGhpcy5zdG9wQ2hlY2tMb2dpbigpOwogICAgfSwKICAgIHdlTG9naW46IGZ1bmN0aW9uIHdlTG9naW4oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiV2VDaGF0TG9naW4iLCB0aGlzLmxvZ2luRm9ybSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiBfdGhpczMucmVkaXJlY3QgfHwgIi8iCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q29va2llOiBmdW5jdGlvbiBnZXRDb29raWUoKSB7CiAgICAgIHZhciB1c2VybmFtZSA9IF9qc0Nvb2tpZS5kZWZhdWx0LmdldCgidXNlcm5hbWUiKTsKICAgICAgdmFyIHBhc3N3b3JkID0gX2pzQ29va2llLmRlZmF1bHQuZ2V0KCJwYXNzd29yZCIpOwogICAgICB2YXIgcmVtZW1iZXJNZSA9IF9qc0Nvb2tpZS5kZWZhdWx0LmdldCgncmVtZW1iZXJNZScpOwogICAgICB0aGlzLmxvZ2luRm9ybSA9IHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUgPT09IHVuZGVmaW5lZCA/IHRoaXMubG9naW5Gb3JtLnVzZXJuYW1lIDogdXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkID09PSB1bmRlZmluZWQgPyB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCA6ICgwLCBfanNlbmNyeXB0LmRlY3J5cHQpKHBhc3N3b3JkKSwKICAgICAgICByZW1lbWJlck1lOiByZW1lbWJlck1lID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IEJvb2xlYW4ocmVtZW1iZXJNZSkKICAgICAgfTsKICAgIH0sCiAgICBoYW5kbGVMb2dpbjogZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzNC5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGlmIChfdGhpczQubG9naW5Gb3JtLnJlbWVtYmVyTWUpIHsKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQuc2V0KCJ1c2VybmFtZSIsIF90aGlzNC5sb2dpbkZvcm0udXNlcm5hbWUsIHsKICAgICAgICAgICAgICBleHBpcmVzOiAzMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQuc2V0KCJwYXNzd29yZCIsICgwLCBfanNlbmNyeXB0LmVuY3J5cHQpKF90aGlzNC5sb2dpbkZvcm0ucGFzc3dvcmQpLCB7CiAgICAgICAgICAgICAgZXhwaXJlczogMzAKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9qc0Nvb2tpZS5kZWZhdWx0LnNldCgncmVtZW1iZXJNZScsIF90aGlzNC5sb2dpbkZvcm0ucmVtZW1iZXJNZSwgewogICAgICAgICAgICAgIGV4cGlyZXM6IDMwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQucmVtb3ZlKCJ1c2VybmFtZSIpOwogICAgICAgICAgICBfanNDb29raWUuZGVmYXVsdC5yZW1vdmUoInBhc3N3b3JkIik7CiAgICAgICAgICAgIF9qc0Nvb2tpZS5kZWZhdWx0LnJlbW92ZSgncmVtZW1iZXJNZScpOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXM0LiRzdG9yZS5kaXNwYXRjaCgiTG9naW4iLCBfdGhpczQubG9naW5Gb3JtKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogX3RoaXM0LnJlZGlyZWN0IHx8ICIvIgogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzNC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChfdGhpczQuY2FwdGNoYUVuYWJsZWQpIHsKICAgICAgICAgICAgICBfdGhpczQuZ2V0Q29kZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["_logo","_interopRequireDefault","require","_login","_jsCookie","_jsencrypt","_qrcode","_auth","name","data","logo","logoImg","codeUrl","ticket","size","loginForm","qrCodeDataUrl","loading","captchaEnabled","register","redirect","undefined","watch","$route","handler","route","query","immediate","created","url","window","location","href","params","split","paramsObj","paramsArr","i","length","param","paramValue","code","weLogin","getCookie","generateQRCode","methods","_this","_asyncToGenerator2","default","_regenerator2","m","_callee","res","_t","w","_context","p","n","getQrCode","v","QRCode","toDataURL","width","height","startCheckLogin","console","error","a","_this2","task","setInterval","_callee2","_context2","$store","dispatch","then","getToken","beforeDestroy","$router","push","path","catch","stopCheckLogin","clearInterval","_this3","username","Cookies","get","password","rememberMe","decrypt","Boolean","handleLogin","_this4","$refs","validate","valid","set","expires","encrypt","remove","getCode"],"sources":["src/views/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <el-form ref=\"loginForm\" :model=\"loginForm\"  class=\"login-form\">\r\n      <p class=\"wx_log_title\"><img style=\"width: 21px;height: 16px;\" src=\"https://www.logomaker.com.cn/statics/images/weixin.png\" alt=\"\">\r\n        <span style=\" font-size: 20px;font-weight: bold;padding-left: 3px;\">微信登录/注册</span>\r\n      </p>\r\n      <div style=\" width: 182px;height: 182px;border: 1px solid #dddddd;margin: auto;\">\r\n        <img :src=\"qrCodeDataUrl\" :width=\"size\" :height=\"size\" alt=\"QR Code\" />\r\n      </div>\r\n      <div style=\"margin-top: 10px;margin-left: 20px\">\r\n        <span style=\"padding-top: 10px;text-align: center;font-size: 12px;color: rgba(153, 153, 153, 1)\">关注\"优立方服务号\"进行登录/注册</span>\r\n      </div>\r\n    </el-form>\r\n    <div class=\"footer-beian\">\r\n      <a href=\"https://beian.miit.gov.cn/\" target=\"_blank\" style=\"text-decoration: none; color: #666;\">\r\n        浙ICP备2025176978号-1\r\n      </a>\r\n      <br />\r\n      <img src=\"@/assets/logo/ba.png\" alt=\"logo\" style=\"height: 18px; vertical-align: middle; margin-right: 6px;\" />\r\n      <a href=\" \" rel=\"noreferrer\" target=\"_blank\">浙公网安备33010802013946号</a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport logoImg from '@/assets/logo/logo.jpg'\r\nimport { getQrCode } from \"@/api/login\";\r\nimport Cookies from \"js-cookie\";\r\nimport { encrypt, decrypt } from '@/utils/jsencrypt'\r\nimport QRCode from \"qrcode\";\r\nimport { getToken } from '@/utils/auth'\r\n\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      logo: logoImg,\r\n      codeUrl: \"\",\r\n      ticket:\"\",\r\n      size:180,\r\n      loginForm: {\r\n        ticket: \"\",\r\n      },\r\n      qrCodeDataUrl:\"\",\r\n      loading: false,\r\n      // 验证码开关\r\n      captchaEnabled: true,\r\n      // 注册开关\r\n      register: false,\r\n      redirect: undefined\r\n    };\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler: function(route) {\r\n        this.redirect = route.query && route.query.redirect;\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    let url = window.location.href;\r\n    let params = url.split('?')[1];\r\n    let paramsObj = {};\r\n    if (params) {\r\n      let paramsArr = params.split('&');\r\n      for (let i = 0; i < paramsArr.length; i++) {\r\n        let param = paramsArr[i].split('=');\r\n        paramsObj[param[0]] = param[1];\r\n      }\r\n    }\r\n    let paramValue = paramsObj['code'];\r\n    if(paramValue){\r\n      this.loginForm.code= paramValue;\r\n      this.weLogin()\r\n      return\r\n    }\r\n    this.getCookie();\r\n    this.generateQRCode();\r\n  },\r\n  methods: {\r\n    async generateQRCode() {\r\n      try {\r\n        const res = await getQrCode();\r\n        this.codeUrl = res.url;\r\n        this.ticket = res.ticket;\r\n        this.qrCodeDataUrl = await QRCode.toDataURL(this.codeUrl, {\r\n          width: 200,\r\n          height: 200,\r\n        });\r\n        this.startCheckLogin(this.ticket)\r\n      } catch (error) {\r\n        console.error(\"生成二维码失败\", error);\r\n      }\r\n    },\r\n\r\n    startCheckLogin(ticket) {\r\n      this.loginForm.ticket = ticket;\r\n      this.task = setInterval(async () => {\r\n        try {\r\n\r\n          this.$store.dispatch(\"OfficeLogin\", this.loginForm).then((res)  => {\r\n            if(getToken()){\r\n              this.beforeDestroy()\r\n            }\r\n            this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\r\n\r\n          }).catch(() => {\r\n            this.loading = false;\r\n          });\r\n        } catch (error) {\r\n          console.error('检查登录状态失败', error);\r\n        }\r\n      }, 2000);\r\n    },\r\n    // 停止定时任务（例如在组件销毁时）\r\n    stopCheckLogin() {\r\n      if (this.task) {\r\n        clearInterval(this.task);\r\n        this.task = null;\r\n      }\r\n    },\r\n    beforeDestroy() {\r\n      // 在组件销毁时清理定时器，避免内存泄漏\r\n      this.stopCheckLogin();\r\n    },\r\n    weLogin() {\r\n      this.$store.dispatch(\"WeChatLogin\", this.loginForm).then(() => {\r\n        this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\r\n      }).catch(() => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    getCookie() {\r\n      const username = Cookies.get(\"username\");\r\n      const password = Cookies.get(\"password\");\r\n      const rememberMe = Cookies.get('rememberMe')\r\n      this.loginForm = {\r\n        username: username === undefined ? this.loginForm.username : username,\r\n        password: password === undefined ? this.loginForm.password : decrypt(password),\r\n        rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)\r\n      };\r\n    },\r\n    handleLogin() {\r\n      this.$refs.loginForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          if (this.loginForm.rememberMe) {\r\n            Cookies.set(\"username\", this.loginForm.username, { expires: 30 });\r\n            Cookies.set(\"password\", encrypt(this.loginForm.password), { expires: 30 });\r\n            Cookies.set('rememberMe', this.loginForm.rememberMe, { expires: 30 });\r\n          } else {\r\n            Cookies.remove(\"username\");\r\n            Cookies.remove(\"password\");\r\n            Cookies.remove('rememberMe');\r\n          }\r\n          this.$store.dispatch(\"Login\", this.loginForm).then(() => {\r\n            this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\r\n          }).catch(() => {\r\n            this.loading = false;\r\n            if (this.captchaEnabled) {\r\n              this.getCode();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\">\r\n/* 新增备案号样式 */\r\n.footer-beian {\r\n  position: fixed;\r\n  bottom: 20px;\r\n  left: 0;\r\n  right: 0;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.login {\r\n  /* 确保登录容器有相对定位 */\r\n  position: relative;\r\n  min-height: 100%;\r\n}\r\n.login {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  background-image: url(\"../assets/images/login-background.jpeg\");\r\n  background-size: cover;\r\n}\r\n.title {\r\n  margin: 0px auto 30px auto;\r\n  text-align: center;\r\n  color: #707070;\r\n}\r\n\r\n.login-form {\r\n  border-radius: 6px;\r\n  background: #ffffff;\r\n  padding: 25px 25px 5px 25px;\r\n  .el-input {\r\n    height: 38px;\r\n    input {\r\n      height: 38px;\r\n    }\r\n  }\r\n  .input-icon {\r\n    height: 39px;\r\n    width: 14px;\r\n    margin-left: 2px;\r\n  }\r\n}\r\n.login-tip {\r\n  font-size: 13px;\r\n  text-align: center;\r\n  color: #bfbfbf;\r\n}\r\n.login-code {\r\n  width: 33%;\r\n  height: 38px;\r\n  float: right;\r\n  img {\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n  }\r\n}\r\n.el-login-footer {\r\n  height: 40px;\r\n  line-height: 40px;\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-family: Arial;\r\n  font-size: 12px;\r\n  letter-spacing: 1px;\r\n}\r\n.login-code-img {\r\n  height: 38px;\r\n}\r\n.qrcode_box{\r\n  width: 4rem!important;\r\n  height: 4rem!important;\r\n  margin:rem(40) auto 0;\r\n  .qrcode{\r\n    width: 4rem!important;\r\n    height: 4rem!important;\r\n  }\r\n}\r\n.wx_log_title{\r\n  text-align: center;\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}